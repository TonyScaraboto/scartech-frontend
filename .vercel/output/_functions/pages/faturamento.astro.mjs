import { e as createComponent, r as renderTemplate, k as renderComponent, l as renderHead } from "../chunks/astro/server_KVWy4EfK.mjs";
import "piccolore";
/* empty css                                       */
import { $ as $$SignedIn, a as $$SignedOut } from "../chunks/SignedOut_CdO1hTIx.mjs";
import { renderers } from "../renderers.mjs";
var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(raw || cooked.slice()) }));
var _a;
const $$Faturamento = createComponent(async ($$result, $$props, $$slots) => {
  return renderTemplate(_a || (_a = __template(['<html lang="pt-BR" data-theme="dark" data-astro-cid-jywtulym> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" content="#0a0a0f"><title>Faturamento - ScarTech Solutions</title><link rel="icon" type="image/png" href="/logo.png"><script src="/js/scartech-cloud.js"><\/script><script src="https://cdn.jsdelivr.net/npm/chart.js"><\/script>', "</head> <body data-astro-cid-jywtulym> ", " ", ' <script>\n      // Theme management\n      (function() {\n        const themeToggle = document.getElementById("themeToggle");\n        const themeIcon = themeToggle?.querySelector(".theme-icon");\n        \n        function initTheme() {\n          const savedTheme = localStorage.getItem("scartech_theme");\n          const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;\n          const theme = savedTheme || (prefersDark ? "dark" : "light");\n          document.documentElement.setAttribute("data-theme", theme);\n          updateThemeIcon(theme);\n        }\n        \n        function updateThemeIcon(theme) {\n          if (themeIcon) themeIcon.textContent = theme === "dark" ? "â˜€ï¸" : "ğŸŒ™";\n        }\n        \n        function toggleTheme() {\n          const currentTheme = document.documentElement.getAttribute("data-theme");\n          const newTheme = currentTheme === "dark" ? "light" : "dark";\n          document.documentElement.setAttribute("data-theme", newTheme);\n          localStorage.setItem("scartech_theme", newTheme);\n          updateThemeIcon(newTheme);\n        }\n        \n        themeToggle?.addEventListener("click", toggleTheme);\n        initTheme();\n      })();\n\n      // Toggle sidebar\n      document.getElementById("toggleBtn")?.addEventListener("click", () => {\n        document.getElementById("sidebar")?.classList.toggle("collapsed");\n      });\n\n      // Gerenciamento de Tabs\n      window.mostrarTab = function (tab) {\n        document\n          .querySelectorAll(".tab")\n          .forEach((t) => t.classList.remove("active"));\n        document\n          .querySelectorAll(".tab-content")\n          .forEach((c) => c.classList.remove("active"));\n\n        event.target.classList.add("active");\n        document\n          .getElementById("tab" + tab.charAt(0).toUpperCase() + tab.slice(1))\n          .classList.add("active");\n\n        if (tab === "relatorios" || tab === "faturamento") {\n          setTimeout(() => atualizarGraficos(), 100);\n        }\n      };\n\n      // Dados - serÃ£o carregados da nuvem\n      let vendas = [];\n      let ordens = [];\n      let clerkUserId = null;\n\n      async function initClerkAndLoadData() {\n        if (typeof window.Clerk !== "undefined" && window.Clerk.user) {\n          clerkUserId = window.Clerk.user.id;\n          window.ScartechCloud.init(clerkUserId);\n          console.log("Clerk userId:", clerkUserId);\n          await loadAllData();\n        } else {\n          setTimeout(initClerkAndLoadData, 500);\n        }\n      }\n\n      async function loadAllData() {\n        try {\n          vendas = await window.ScartechCloud.getVendas();\n          ordens = await window.ScartechCloud.getOrdens();\n        } catch (error) {\n          console.error("Erro ao carregar dados da nuvem:", error);\n          vendas = JSON.parse(localStorage.getItem("scartech_vendas") || "[]");\n          ordens = JSON.parse(localStorage.getItem("scartech_ordens") || "[]");\n        }\n        atualizarFaturamento();\n        renderTopServicos();\n        setTimeout(() => atualizarGraficos(), 100);\n      }\n\n      // ========== GRÃFICOS ==========\n      const cores = {\n        cyan: "#00ffff",\n        cyanTransp: "rgba(0, 255, 255, 0.2)",\n        green: "#00ff88",\n        greenTransp: "rgba(0, 255, 136, 0.2)",\n        purple: "#aa88ff",\n        purpleTransp: "rgba(170, 136, 255, 0.2)",\n        orange: "#ffaa00",\n        orangeTransp: "rgba(255, 170, 0, 0.2)",\n        red: "#ff6b6b",\n        blue: "#00d4ff",\n        blueTransp: "rgba(0, 212, 255, 0.2)",\n      };\n\n      Chart.defaults.color = "#a0a0a0";\n      Chart.defaults.borderColor = "rgba(0, 255, 255, 0.1)";\n\n      let chartEvolucao,\n        chartDistribuicao,\n        chartFaturamento,\n        chartCategoria,\n        chartStatus,\n        chartDiaSemana;\n\n      function atualizarFaturamento() {\n        const faturamentoOrdens = ordens.reduce(\n          (sum, o) => sum + (parseFloat(o.valor) || 0),\n          0,\n        );\n        const faturamentoVendas = vendas.reduce(\n          (sum, v) => sum + (v.total || v.valor || 0),\n          0,\n        );\n        const totalGeral = faturamentoOrdens + faturamentoVendas;\n        const totalTransacoes = ordens.length + vendas.length;\n        const ticketMedio =\n          totalTransacoes > 0 ? totalGeral / totalTransacoes : 0;\n\n        document.getElementById("totalGeral").textContent =\n          `R$ ${totalGeral.toFixed(2)}`;\n        document.getElementById("faturamentoOrdens").textContent =\n          `R$ ${faturamentoOrdens.toFixed(2)}`;\n        document.getElementById("faturamentoVendas").textContent =\n          `R$ ${faturamentoVendas.toFixed(2)}`;\n        document.getElementById("ticketMedioGeral").textContent =\n          `R$ ${ticketMedio.toFixed(2)}`;\n\n        // Tabela resumo\n        const tbody = document.getElementById("resumoFaturamentoBody");\n        const percOrdens =\n          totalGeral > 0\n            ? ((faturamentoOrdens / totalGeral) * 100).toFixed(1)\n            : 0;\n        const percVendas =\n          totalGeral > 0\n            ? ((faturamentoVendas / totalGeral) * 100).toFixed(1)\n            : 0;\n\n        tbody.innerHTML = `\n          <tr>\n            <td>ğŸ“‹ Ordens de ServiÃ§o</td>\n            <td>${ordens.length}</td>\n            <td class="valor">R$ ${faturamentoOrdens.toFixed(2)}</td>\n            <td>${percOrdens}%</td>\n          </tr>\n          <tr>\n            <td>ğŸ›’ Vendas</td>\n            <td>${vendas.length}</td>\n            <td class="valor">R$ ${faturamentoVendas.toFixed(2)}</td>\n            <td>${percVendas}%</td>\n          </tr>\n          <tr style="border-top: 2px solid rgba(0,255,255,0.3); font-weight: bold;">\n            <td>ğŸ“Š TOTAL</td>\n            <td>${totalTransacoes}</td>\n            <td class="valor">R$ ${totalGeral.toFixed(2)}</td>\n            <td>100%</td>\n          </tr>\n        `;\n\n        // GrÃ¡fico EvoluÃ§Ã£o\n        const ctx1 = document.getElementById("chartEvolucao")?.getContext("2d");\n        if (ctx1) {\n          if (chartEvolucao) chartEvolucao.destroy();\n          const meses = [\n            "Jan",\n            "Fev",\n            "Mar",\n            "Abr",\n            "Mai",\n            "Jun",\n            "Jul",\n            "Ago",\n            "Set",\n            "Out",\n            "Nov",\n            "Dez",\n          ];\n          const mesAtual = new Date().getMonth();\n          const dadosMensais = meses.map((_, i) => {\n            if (i === mesAtual) return totalGeral;\n            if (i === mesAtual - 1) return totalGeral * 0.85;\n            return Math.random() * totalGeral * 0.5;\n          });\n          chartEvolucao = new Chart(ctx1, {\n            type: "line",\n            data: {\n              labels: meses,\n              datasets: [\n                {\n                  label: "Faturamento (R$)",\n                  data: dadosMensais,\n                  borderColor: cores.cyan,\n                  backgroundColor: cores.cyanTransp,\n                  fill: true,\n                  tension: 0.4,\n                },\n              ],\n            },\n            options: {\n              responsive: true,\n              maintainAspectRatio: false,\n              plugins: { legend: { display: false } },\n            },\n          });\n        }\n\n        // GrÃ¡fico DistribuiÃ§Ã£o\n        const ctx2 = document\n          .getElementById("chartDistribuicao")\n          ?.getContext("2d");\n        if (ctx2) {\n          if (chartDistribuicao) chartDistribuicao.destroy();\n          chartDistribuicao = new Chart(ctx2, {\n            type: "doughnut",\n            data: {\n              labels: ["ServiÃ§os (OS)", "Vendas"],\n              datasets: [\n                {\n                  data: [faturamentoOrdens || 1, faturamentoVendas || 1],\n                  backgroundColor: [cores.cyan, cores.green],\n                  borderColor: "#0a0a0f",\n                  borderWidth: 3,\n                },\n              ],\n            },\n            options: {\n              responsive: true,\n              maintainAspectRatio: false,\n              plugins: { legend: { position: "bottom" } },\n            },\n          });\n        }\n      }\n\n      function atualizarGraficos() {\n        const faturamentoOrdens = ordens.reduce(\n          (sum, o) => sum + (parseFloat(o.valor) || 0),\n          0,\n        );\n        const faturamentoVendas = vendas.reduce(\n          (sum, v) => sum + (v.total || v.valor || 0),\n          0,\n        );\n        const totalFaturamento = faturamentoOrdens + faturamentoVendas;\n        const totalTransacoes = ordens.length + vendas.length;\n        const ticketMedio =\n          totalTransacoes > 0 ? totalFaturamento / totalTransacoes : 0;\n\n        document.getElementById("totalFaturamento").textContent =\n          `R$ ${totalFaturamento.toFixed(2)}`;\n        document.getElementById("totalOrdens").textContent = ordens.length;\n        document.getElementById("totalVendasRelat").textContent = vendas.length;\n        document.getElementById("ticketMedio").textContent =\n          `R$ ${ticketMedio.toFixed(2)}`;\n\n        // GrÃ¡fico Faturamento\n        const ctx1 = document\n          .getElementById("chartFaturamento")\n          ?.getContext("2d");\n        if (ctx1) {\n          if (chartFaturamento) chartFaturamento.destroy();\n          const meses = [\n            "Jan",\n            "Fev",\n            "Mar",\n            "Abr",\n            "Mai",\n            "Jun",\n            "Jul",\n            "Ago",\n            "Set",\n            "Out",\n            "Nov",\n            "Dez",\n          ];\n          const mesAtual = new Date().getMonth();\n          const dadosMensais = meses.map((_, i) => {\n            if (i === mesAtual) return totalFaturamento;\n            if (i === mesAtual - 1) return totalFaturamento * 0.85;\n            return Math.random() * totalFaturamento * 0.5;\n          });\n          chartFaturamento = new Chart(ctx1, {\n            type: "line",\n            data: {\n              labels: meses,\n              datasets: [\n                {\n                  label: "Faturamento (R$)",\n                  data: dadosMensais,\n                  borderColor: cores.cyan,\n                  backgroundColor: cores.cyanTransp,\n                  fill: true,\n                  tension: 0.4,\n                },\n              ],\n            },\n            options: {\n              responsive: true,\n              maintainAspectRatio: false,\n              plugins: { legend: { display: false } },\n            },\n          });\n        }\n\n        // GrÃ¡fico Categoria\n        const ctx2 = document\n          .getElementById("chartCategoria")\n          ?.getContext("2d");\n        if (ctx2) {\n          if (chartCategoria) chartCategoria.destroy();\n          chartCategoria = new Chart(ctx2, {\n            type: "doughnut",\n            data: {\n              labels: ["ServiÃ§os (OS)", "Vendas"],\n              datasets: [\n                {\n                  data: [faturamentoOrdens || 1, faturamentoVendas || 1],\n                  backgroundColor: [cores.cyan, cores.green],\n                  borderColor: "#0a0a0f",\n                  borderWidth: 3,\n                },\n              ],\n            },\n            options: {\n              responsive: true,\n              maintainAspectRatio: false,\n              plugins: { legend: { position: "bottom" } },\n            },\n          });\n        }\n\n        // GrÃ¡fico Status\n        const ctx3 = document.getElementById("chartStatus")?.getContext("2d");\n        if (ctx3) {\n          if (chartStatus) chartStatus.destroy();\n          const abertas = ordens.filter((o) => o.status === "aberta").length;\n          const concluidas = ordens.filter(\n            (o) => o.status === "concluida",\n          ).length;\n          chartStatus = new Chart(ctx3, {\n            type: "bar",\n            data: {\n              labels: ["Abertas", "ConcluÃ­das"],\n              datasets: [\n                {\n                  data: [abertas, concluidas],\n                  backgroundColor: [cores.orangeTransp, cores.greenTransp],\n                  borderColor: [cores.orange, cores.green],\n                  borderWidth: 2,\n                  borderRadius: 8,\n                },\n              ],\n            },\n            options: {\n              responsive: true,\n              maintainAspectRatio: false,\n              plugins: { legend: { display: false } },\n            },\n          });\n        }\n\n        // GrÃ¡fico Dia Semana\n        const ctx4 = document\n          .getElementById("chartDiaSemana")\n          ?.getContext("2d");\n        if (ctx4) {\n          if (chartDiaSemana) chartDiaSemana.destroy();\n          chartDiaSemana = new Chart(ctx4, {\n            type: "bar",\n            data: {\n              labels: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "SÃ¡b"],\n              datasets: [\n                {\n                  label: "Vendas",\n                  data: [1, 5, 8, 6, 9, 7, 3],\n                  backgroundColor: cores.purpleTransp,\n                  borderColor: cores.purple,\n                  borderWidth: 2,\n                  borderRadius: 8,\n                },\n              ],\n            },\n            options: {\n              responsive: true,\n              maintainAspectRatio: false,\n              plugins: { legend: { display: false } },\n            },\n          });\n        }\n      }\n\n      // Top ServiÃ§os\n      function renderTopServicos() {\n        const servicos = {};\n        ordens.forEach((o) => {\n          const tipo = o.equipamento || "ServiÃ§o Geral";\n          if (!servicos[tipo]) servicos[tipo] = { qtd: 0, receita: 0 };\n          servicos[tipo].qtd++;\n          servicos[tipo].receita += parseFloat(o.valor) || 0;\n        });\n\n        const sorted = Object.entries(servicos)\n          .sort((a, b) => b[1].qtd - a[1].qtd)\n          .slice(0, 5);\n        const tbody = document.getElementById("topServicosBody");\n\n        if (sorted.length === 0) {\n          tbody.innerHTML =\n            \'<tr><td colspan="5" class="empty-message">Nenhum serviÃ§o registrado</td></tr>\';\n        } else {\n          tbody.innerHTML = sorted\n            .map(\n              ([tipo, dados], i) => `\n            <tr>\n              <td>${i + 1}</td>\n              <td>${tipo}</td>\n              <td>${dados.qtd}</td>\n              <td class="valor">R$ ${dados.receita.toFixed(2)}</td>\n              <td class="trend-up">ğŸ“ˆ</td>\n            </tr>\n          `,\n            )\n            .join("");\n        }\n\n        // Top Produtos\n        const produtos = {};\n        vendas.forEach((v) => {\n          const nome = v.produto || "Produto";\n          if (!produtos[nome]) produtos[nome] = { qtd: 0, receita: 0 };\n          produtos[nome].qtd += v.quantidade || 1;\n          produtos[nome].receita += v.total || v.valor || 0;\n        });\n\n        const sortedProd = Object.entries(produtos)\n          .sort((a, b) => b[1].qtd - a[1].qtd)\n          .slice(0, 5);\n        const tbodyProd = document.getElementById("topProdutosBody");\n\n        if (sortedProd.length === 0) {\n          tbodyProd.innerHTML =\n            \'<tr><td colspan="4" class="empty-message">Nenhum produto vendido</td></tr>\';\n        } else {\n          tbodyProd.innerHTML = sortedProd\n            .map(\n              ([nome, dados], i) => `\n            <tr>\n              <td>${i + 1}</td>\n              <td>${nome}</td>\n              <td>${dados.qtd}</td>\n              <td class="valor">R$ ${dados.receita.toFixed(2)}</td>\n            </tr>\n          `,\n            )\n            .join("");\n        }\n      }\n\n      // Mobile Menu Toggle\n      const mobileMenuBtn = document.getElementById("mobileMenuBtn");\n      const sidebarOverlay = document.getElementById("sidebarOverlay");\n      const sidebar = document.getElementById("sidebar");\n\n      function toggleMobileMenu() {\n        mobileMenuBtn?.classList.toggle("active");\n        sidebar?.classList.toggle("open");\n        sidebarOverlay?.classList.toggle("visible");\n      }\n\n      mobileMenuBtn?.addEventListener("click", toggleMobileMenu);\n      sidebarOverlay?.addEventListener("click", toggleMobileMenu);\n\n      // Inicializar com carregamento da nuvem\n      initClerkAndLoadData();\n    <\/script> </body> </html>'], ['<html lang="pt-BR" data-theme="dark" data-astro-cid-jywtulym> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" content="#0a0a0f"><title>Faturamento - ScarTech Solutions</title><link rel="icon" type="image/png" href="/logo.png"><script src="/js/scartech-cloud.js"><\/script><script src="https://cdn.jsdelivr.net/npm/chart.js"><\/script>', "</head> <body data-astro-cid-jywtulym> ", " ", ' <script>\n      // Theme management\n      (function() {\n        const themeToggle = document.getElementById("themeToggle");\n        const themeIcon = themeToggle?.querySelector(".theme-icon");\n        \n        function initTheme() {\n          const savedTheme = localStorage.getItem("scartech_theme");\n          const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;\n          const theme = savedTheme || (prefersDark ? "dark" : "light");\n          document.documentElement.setAttribute("data-theme", theme);\n          updateThemeIcon(theme);\n        }\n        \n        function updateThemeIcon(theme) {\n          if (themeIcon) themeIcon.textContent = theme === "dark" ? "â˜€ï¸" : "ğŸŒ™";\n        }\n        \n        function toggleTheme() {\n          const currentTheme = document.documentElement.getAttribute("data-theme");\n          const newTheme = currentTheme === "dark" ? "light" : "dark";\n          document.documentElement.setAttribute("data-theme", newTheme);\n          localStorage.setItem("scartech_theme", newTheme);\n          updateThemeIcon(newTheme);\n        }\n        \n        themeToggle?.addEventListener("click", toggleTheme);\n        initTheme();\n      })();\n\n      // Toggle sidebar\n      document.getElementById("toggleBtn")?.addEventListener("click", () => {\n        document.getElementById("sidebar")?.classList.toggle("collapsed");\n      });\n\n      // Gerenciamento de Tabs\n      window.mostrarTab = function (tab) {\n        document\n          .querySelectorAll(".tab")\n          .forEach((t) => t.classList.remove("active"));\n        document\n          .querySelectorAll(".tab-content")\n          .forEach((c) => c.classList.remove("active"));\n\n        event.target.classList.add("active");\n        document\n          .getElementById("tab" + tab.charAt(0).toUpperCase() + tab.slice(1))\n          .classList.add("active");\n\n        if (tab === "relatorios" || tab === "faturamento") {\n          setTimeout(() => atualizarGraficos(), 100);\n        }\n      };\n\n      // Dados - serÃ£o carregados da nuvem\n      let vendas = [];\n      let ordens = [];\n      let clerkUserId = null;\n\n      async function initClerkAndLoadData() {\n        if (typeof window.Clerk !== "undefined" && window.Clerk.user) {\n          clerkUserId = window.Clerk.user.id;\n          window.ScartechCloud.init(clerkUserId);\n          console.log("Clerk userId:", clerkUserId);\n          await loadAllData();\n        } else {\n          setTimeout(initClerkAndLoadData, 500);\n        }\n      }\n\n      async function loadAllData() {\n        try {\n          vendas = await window.ScartechCloud.getVendas();\n          ordens = await window.ScartechCloud.getOrdens();\n        } catch (error) {\n          console.error("Erro ao carregar dados da nuvem:", error);\n          vendas = JSON.parse(localStorage.getItem("scartech_vendas") || "[]");\n          ordens = JSON.parse(localStorage.getItem("scartech_ordens") || "[]");\n        }\n        atualizarFaturamento();\n        renderTopServicos();\n        setTimeout(() => atualizarGraficos(), 100);\n      }\n\n      // ========== GRÃFICOS ==========\n      const cores = {\n        cyan: "#00ffff",\n        cyanTransp: "rgba(0, 255, 255, 0.2)",\n        green: "#00ff88",\n        greenTransp: "rgba(0, 255, 136, 0.2)",\n        purple: "#aa88ff",\n        purpleTransp: "rgba(170, 136, 255, 0.2)",\n        orange: "#ffaa00",\n        orangeTransp: "rgba(255, 170, 0, 0.2)",\n        red: "#ff6b6b",\n        blue: "#00d4ff",\n        blueTransp: "rgba(0, 212, 255, 0.2)",\n      };\n\n      Chart.defaults.color = "#a0a0a0";\n      Chart.defaults.borderColor = "rgba(0, 255, 255, 0.1)";\n\n      let chartEvolucao,\n        chartDistribuicao,\n        chartFaturamento,\n        chartCategoria,\n        chartStatus,\n        chartDiaSemana;\n\n      function atualizarFaturamento() {\n        const faturamentoOrdens = ordens.reduce(\n          (sum, o) => sum + (parseFloat(o.valor) || 0),\n          0,\n        );\n        const faturamentoVendas = vendas.reduce(\n          (sum, v) => sum + (v.total || v.valor || 0),\n          0,\n        );\n        const totalGeral = faturamentoOrdens + faturamentoVendas;\n        const totalTransacoes = ordens.length + vendas.length;\n        const ticketMedio =\n          totalTransacoes > 0 ? totalGeral / totalTransacoes : 0;\n\n        document.getElementById("totalGeral").textContent =\n          \\`R$ \\${totalGeral.toFixed(2)}\\`;\n        document.getElementById("faturamentoOrdens").textContent =\n          \\`R$ \\${faturamentoOrdens.toFixed(2)}\\`;\n        document.getElementById("faturamentoVendas").textContent =\n          \\`R$ \\${faturamentoVendas.toFixed(2)}\\`;\n        document.getElementById("ticketMedioGeral").textContent =\n          \\`R$ \\${ticketMedio.toFixed(2)}\\`;\n\n        // Tabela resumo\n        const tbody = document.getElementById("resumoFaturamentoBody");\n        const percOrdens =\n          totalGeral > 0\n            ? ((faturamentoOrdens / totalGeral) * 100).toFixed(1)\n            : 0;\n        const percVendas =\n          totalGeral > 0\n            ? ((faturamentoVendas / totalGeral) * 100).toFixed(1)\n            : 0;\n\n        tbody.innerHTML = \\`\n          <tr>\n            <td>ğŸ“‹ Ordens de ServiÃ§o</td>\n            <td>\\${ordens.length}</td>\n            <td class="valor">R$ \\${faturamentoOrdens.toFixed(2)}</td>\n            <td>\\${percOrdens}%</td>\n          </tr>\n          <tr>\n            <td>ğŸ›’ Vendas</td>\n            <td>\\${vendas.length}</td>\n            <td class="valor">R$ \\${faturamentoVendas.toFixed(2)}</td>\n            <td>\\${percVendas}%</td>\n          </tr>\n          <tr style="border-top: 2px solid rgba(0,255,255,0.3); font-weight: bold;">\n            <td>ğŸ“Š TOTAL</td>\n            <td>\\${totalTransacoes}</td>\n            <td class="valor">R$ \\${totalGeral.toFixed(2)}</td>\n            <td>100%</td>\n          </tr>\n        \\`;\n\n        // GrÃ¡fico EvoluÃ§Ã£o\n        const ctx1 = document.getElementById("chartEvolucao")?.getContext("2d");\n        if (ctx1) {\n          if (chartEvolucao) chartEvolucao.destroy();\n          const meses = [\n            "Jan",\n            "Fev",\n            "Mar",\n            "Abr",\n            "Mai",\n            "Jun",\n            "Jul",\n            "Ago",\n            "Set",\n            "Out",\n            "Nov",\n            "Dez",\n          ];\n          const mesAtual = new Date().getMonth();\n          const dadosMensais = meses.map((_, i) => {\n            if (i === mesAtual) return totalGeral;\n            if (i === mesAtual - 1) return totalGeral * 0.85;\n            return Math.random() * totalGeral * 0.5;\n          });\n          chartEvolucao = new Chart(ctx1, {\n            type: "line",\n            data: {\n              labels: meses,\n              datasets: [\n                {\n                  label: "Faturamento (R$)",\n                  data: dadosMensais,\n                  borderColor: cores.cyan,\n                  backgroundColor: cores.cyanTransp,\n                  fill: true,\n                  tension: 0.4,\n                },\n              ],\n            },\n            options: {\n              responsive: true,\n              maintainAspectRatio: false,\n              plugins: { legend: { display: false } },\n            },\n          });\n        }\n\n        // GrÃ¡fico DistribuiÃ§Ã£o\n        const ctx2 = document\n          .getElementById("chartDistribuicao")\n          ?.getContext("2d");\n        if (ctx2) {\n          if (chartDistribuicao) chartDistribuicao.destroy();\n          chartDistribuicao = new Chart(ctx2, {\n            type: "doughnut",\n            data: {\n              labels: ["ServiÃ§os (OS)", "Vendas"],\n              datasets: [\n                {\n                  data: [faturamentoOrdens || 1, faturamentoVendas || 1],\n                  backgroundColor: [cores.cyan, cores.green],\n                  borderColor: "#0a0a0f",\n                  borderWidth: 3,\n                },\n              ],\n            },\n            options: {\n              responsive: true,\n              maintainAspectRatio: false,\n              plugins: { legend: { position: "bottom" } },\n            },\n          });\n        }\n      }\n\n      function atualizarGraficos() {\n        const faturamentoOrdens = ordens.reduce(\n          (sum, o) => sum + (parseFloat(o.valor) || 0),\n          0,\n        );\n        const faturamentoVendas = vendas.reduce(\n          (sum, v) => sum + (v.total || v.valor || 0),\n          0,\n        );\n        const totalFaturamento = faturamentoOrdens + faturamentoVendas;\n        const totalTransacoes = ordens.length + vendas.length;\n        const ticketMedio =\n          totalTransacoes > 0 ? totalFaturamento / totalTransacoes : 0;\n\n        document.getElementById("totalFaturamento").textContent =\n          \\`R$ \\${totalFaturamento.toFixed(2)}\\`;\n        document.getElementById("totalOrdens").textContent = ordens.length;\n        document.getElementById("totalVendasRelat").textContent = vendas.length;\n        document.getElementById("ticketMedio").textContent =\n          \\`R$ \\${ticketMedio.toFixed(2)}\\`;\n\n        // GrÃ¡fico Faturamento\n        const ctx1 = document\n          .getElementById("chartFaturamento")\n          ?.getContext("2d");\n        if (ctx1) {\n          if (chartFaturamento) chartFaturamento.destroy();\n          const meses = [\n            "Jan",\n            "Fev",\n            "Mar",\n            "Abr",\n            "Mai",\n            "Jun",\n            "Jul",\n            "Ago",\n            "Set",\n            "Out",\n            "Nov",\n            "Dez",\n          ];\n          const mesAtual = new Date().getMonth();\n          const dadosMensais = meses.map((_, i) => {\n            if (i === mesAtual) return totalFaturamento;\n            if (i === mesAtual - 1) return totalFaturamento * 0.85;\n            return Math.random() * totalFaturamento * 0.5;\n          });\n          chartFaturamento = new Chart(ctx1, {\n            type: "line",\n            data: {\n              labels: meses,\n              datasets: [\n                {\n                  label: "Faturamento (R$)",\n                  data: dadosMensais,\n                  borderColor: cores.cyan,\n                  backgroundColor: cores.cyanTransp,\n                  fill: true,\n                  tension: 0.4,\n                },\n              ],\n            },\n            options: {\n              responsive: true,\n              maintainAspectRatio: false,\n              plugins: { legend: { display: false } },\n            },\n          });\n        }\n\n        // GrÃ¡fico Categoria\n        const ctx2 = document\n          .getElementById("chartCategoria")\n          ?.getContext("2d");\n        if (ctx2) {\n          if (chartCategoria) chartCategoria.destroy();\n          chartCategoria = new Chart(ctx2, {\n            type: "doughnut",\n            data: {\n              labels: ["ServiÃ§os (OS)", "Vendas"],\n              datasets: [\n                {\n                  data: [faturamentoOrdens || 1, faturamentoVendas || 1],\n                  backgroundColor: [cores.cyan, cores.green],\n                  borderColor: "#0a0a0f",\n                  borderWidth: 3,\n                },\n              ],\n            },\n            options: {\n              responsive: true,\n              maintainAspectRatio: false,\n              plugins: { legend: { position: "bottom" } },\n            },\n          });\n        }\n\n        // GrÃ¡fico Status\n        const ctx3 = document.getElementById("chartStatus")?.getContext("2d");\n        if (ctx3) {\n          if (chartStatus) chartStatus.destroy();\n          const abertas = ordens.filter((o) => o.status === "aberta").length;\n          const concluidas = ordens.filter(\n            (o) => o.status === "concluida",\n          ).length;\n          chartStatus = new Chart(ctx3, {\n            type: "bar",\n            data: {\n              labels: ["Abertas", "ConcluÃ­das"],\n              datasets: [\n                {\n                  data: [abertas, concluidas],\n                  backgroundColor: [cores.orangeTransp, cores.greenTransp],\n                  borderColor: [cores.orange, cores.green],\n                  borderWidth: 2,\n                  borderRadius: 8,\n                },\n              ],\n            },\n            options: {\n              responsive: true,\n              maintainAspectRatio: false,\n              plugins: { legend: { display: false } },\n            },\n          });\n        }\n\n        // GrÃ¡fico Dia Semana\n        const ctx4 = document\n          .getElementById("chartDiaSemana")\n          ?.getContext("2d");\n        if (ctx4) {\n          if (chartDiaSemana) chartDiaSemana.destroy();\n          chartDiaSemana = new Chart(ctx4, {\n            type: "bar",\n            data: {\n              labels: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "SÃ¡b"],\n              datasets: [\n                {\n                  label: "Vendas",\n                  data: [1, 5, 8, 6, 9, 7, 3],\n                  backgroundColor: cores.purpleTransp,\n                  borderColor: cores.purple,\n                  borderWidth: 2,\n                  borderRadius: 8,\n                },\n              ],\n            },\n            options: {\n              responsive: true,\n              maintainAspectRatio: false,\n              plugins: { legend: { display: false } },\n            },\n          });\n        }\n      }\n\n      // Top ServiÃ§os\n      function renderTopServicos() {\n        const servicos = {};\n        ordens.forEach((o) => {\n          const tipo = o.equipamento || "ServiÃ§o Geral";\n          if (!servicos[tipo]) servicos[tipo] = { qtd: 0, receita: 0 };\n          servicos[tipo].qtd++;\n          servicos[tipo].receita += parseFloat(o.valor) || 0;\n        });\n\n        const sorted = Object.entries(servicos)\n          .sort((a, b) => b[1].qtd - a[1].qtd)\n          .slice(0, 5);\n        const tbody = document.getElementById("topServicosBody");\n\n        if (sorted.length === 0) {\n          tbody.innerHTML =\n            \'<tr><td colspan="5" class="empty-message">Nenhum serviÃ§o registrado</td></tr>\';\n        } else {\n          tbody.innerHTML = sorted\n            .map(\n              ([tipo, dados], i) => \\`\n            <tr>\n              <td>\\${i + 1}</td>\n              <td>\\${tipo}</td>\n              <td>\\${dados.qtd}</td>\n              <td class="valor">R$ \\${dados.receita.toFixed(2)}</td>\n              <td class="trend-up">ğŸ“ˆ</td>\n            </tr>\n          \\`,\n            )\n            .join("");\n        }\n\n        // Top Produtos\n        const produtos = {};\n        vendas.forEach((v) => {\n          const nome = v.produto || "Produto";\n          if (!produtos[nome]) produtos[nome] = { qtd: 0, receita: 0 };\n          produtos[nome].qtd += v.quantidade || 1;\n          produtos[nome].receita += v.total || v.valor || 0;\n        });\n\n        const sortedProd = Object.entries(produtos)\n          .sort((a, b) => b[1].qtd - a[1].qtd)\n          .slice(0, 5);\n        const tbodyProd = document.getElementById("topProdutosBody");\n\n        if (sortedProd.length === 0) {\n          tbodyProd.innerHTML =\n            \'<tr><td colspan="4" class="empty-message">Nenhum produto vendido</td></tr>\';\n        } else {\n          tbodyProd.innerHTML = sortedProd\n            .map(\n              ([nome, dados], i) => \\`\n            <tr>\n              <td>\\${i + 1}</td>\n              <td>\\${nome}</td>\n              <td>\\${dados.qtd}</td>\n              <td class="valor">R$ \\${dados.receita.toFixed(2)}</td>\n            </tr>\n          \\`,\n            )\n            .join("");\n        }\n      }\n\n      // Mobile Menu Toggle\n      const mobileMenuBtn = document.getElementById("mobileMenuBtn");\n      const sidebarOverlay = document.getElementById("sidebarOverlay");\n      const sidebar = document.getElementById("sidebar");\n\n      function toggleMobileMenu() {\n        mobileMenuBtn?.classList.toggle("active");\n        sidebar?.classList.toggle("open");\n        sidebarOverlay?.classList.toggle("visible");\n      }\n\n      mobileMenuBtn?.addEventListener("click", toggleMobileMenu);\n      sidebarOverlay?.addEventListener("click", toggleMobileMenu);\n\n      // Inicializar com carregamento da nuvem\n      initClerkAndLoadData();\n    <\/script> </body> </html>'])), renderHead(), renderComponent($$result, "SignedOut", $$SignedOut, { "data-astro-cid-jywtulym": true }, { "default": async ($$result2) => renderTemplate` <div class="not-signed-in" data-astro-cid-jywtulym> <h2 data-astro-cid-jywtulym>Acesso Restrito</h2> <a href="/" class="login-btn" data-astro-cid-jywtulym>Fazer Login</a> </div> ` }), renderComponent($$result, "SignedIn", $$SignedIn, { "data-astro-cid-jywtulym": true }, { "default": async ($$result2) => renderTemplate`  <button class="theme-toggle" id="themeToggle" title="Alternar tema" data-astro-cid-jywtulym> <span class="theme-icon" data-astro-cid-jywtulym>ğŸŒ™</span> </button>  <button class="mobile-menu-btn" id="mobileMenuBtn" data-astro-cid-jywtulym> <span data-astro-cid-jywtulym></span><span data-astro-cid-jywtulym></span><span data-astro-cid-jywtulym></span> </button> <div class="sidebar-overlay" id="sidebarOverlay" data-astro-cid-jywtulym></div> <div class="layout" data-astro-cid-jywtulym> <aside class="sidebar" id="sidebar" data-astro-cid-jywtulym> <button class="toggle-btn" id="toggleBtn" data-astro-cid-jywtulym> <div class="hamburger" data-astro-cid-jywtulym><span data-astro-cid-jywtulym></span><span data-astro-cid-jywtulym></span><span data-astro-cid-jywtulym></span></div> </button> <div class="sidebar-header" data-astro-cid-jywtulym> <img src="/logo.png" alt="ScarTech" class="logo-img" data-astro-cid-jywtulym> <span class="logo-text" data-astro-cid-jywtulym>ScarTech</span> </div> <nav class="nav-section" data-astro-cid-jywtulym> <div class="nav-title" data-astro-cid-jywtulym>Principal</div> <a href="/dashboard" class="nav-item" data-astro-cid-jywtulym><span class="nav-icon" data-astro-cid-jywtulym>ğŸ </span><span class="nav-text" data-astro-cid-jywtulym>Dashboard</span></a> <a href="/faturamento" class="nav-item active" data-astro-cid-jywtulym><span class="nav-icon" data-astro-cid-jywtulym>ğŸ’°</span><span class="nav-text" data-astro-cid-jywtulym>Faturamento</span></a> </nav> <nav class="nav-section" data-astro-cid-jywtulym> <div class="nav-title" data-astro-cid-jywtulym>GestÃ£o</div> <a href="/ordens" class="nav-item" data-astro-cid-jywtulym><span class="nav-icon" data-astro-cid-jywtulym>ğŸ“‹</span><span class="nav-text" data-astro-cid-jywtulym>Ordens de ServiÃ§o</span></a> <a href="/produtos" class="nav-item" data-astro-cid-jywtulym><span class="nav-icon" data-astro-cid-jywtulym>ğŸ“¦</span><span class="nav-text" data-astro-cid-jywtulym>Produtos</span></a> <a href="/vendas" class="nav-item" data-astro-cid-jywtulym><span class="nav-icon" data-astro-cid-jywtulym>ğŸ›’</span><span class="nav-text" data-astro-cid-jywtulym>Vendas</span></a> </nav> </aside> <main class="main-content" data-astro-cid-jywtulym> <div class="page-header" data-astro-cid-jywtulym> <h1 class="page-title" data-astro-cid-jywtulym>ğŸ’° Faturamento</h1> <p class="page-subtitle" data-astro-cid-jywtulym>
BalanÃ§o financeiro, relatÃ³rios e anÃ¡lises
</p> </div> <!-- Tabs --> <div class="tabs" data-astro-cid-jywtulym> <button class="tab active" onclick="window.mostrarTab('faturamento')" data-astro-cid-jywtulym>ğŸ’° Faturamento</button> <button class="tab" onclick="window.mostrarTab('relatorios')" data-astro-cid-jywtulym>ğŸ“Š RelatÃ³rios</button> <button class="tab" onclick="window.mostrarTab('topServicos')" data-astro-cid-jywtulym>ğŸ† Top ServiÃ§os</button> </div> <!-- Tab Faturamento --> <div class="tab-content active" id="tabFaturamento" data-astro-cid-jywtulym> <div class="stats-grid" data-astro-cid-jywtulym> <div class="stat-card green" data-astro-cid-jywtulym> <div class="stat-icon" data-astro-cid-jywtulym>ğŸ’°</div> <div class="stat-value" id="totalGeral" data-astro-cid-jywtulym>R$ 0,00</div> <div class="stat-label" data-astro-cid-jywtulym>Faturamento Total</div> </div> <div class="stat-card blue" data-astro-cid-jywtulym> <div class="stat-icon" data-astro-cid-jywtulym>ğŸ“‹</div> <div class="stat-value" id="faturamentoOrdens" data-astro-cid-jywtulym>R$ 0,00</div> <div class="stat-label" data-astro-cid-jywtulym>Ordens de ServiÃ§o</div> </div> <div class="stat-card purple" data-astro-cid-jywtulym> <div class="stat-icon" data-astro-cid-jywtulym>ğŸ›’</div> <div class="stat-value" id="faturamentoVendas" data-astro-cid-jywtulym>R$ 0,00</div> <div class="stat-label" data-astro-cid-jywtulym>Vendas</div> </div> <div class="stat-card orange" data-astro-cid-jywtulym> <div class="stat-icon" data-astro-cid-jywtulym>ğŸ“ˆ</div> <div class="stat-value" id="ticketMedioGeral" data-astro-cid-jywtulym>R$ 0,00</div> <div class="stat-label" data-astro-cid-jywtulym>Ticket MÃ©dio</div> </div> </div> <div class="card" data-astro-cid-jywtulym> <h3 class="card-title" data-astro-cid-jywtulym>ğŸ“Š Resumo do PerÃ­odo</h3> <table data-astro-cid-jywtulym> <thead data-astro-cid-jywtulym> <tr data-astro-cid-jywtulym> <th data-astro-cid-jywtulym>Categoria</th> <th data-astro-cid-jywtulym>Quantidade</th> <th data-astro-cid-jywtulym>Valor Total</th> <th data-astro-cid-jywtulym>% do Total</th> </tr> </thead> <tbody id="resumoFaturamentoBody" data-astro-cid-jywtulym></tbody> </table> </div> <div class="charts-grid" data-astro-cid-jywtulym> <div class="chart-card" data-astro-cid-jywtulym> <h3 class="chart-title" data-astro-cid-jywtulym>ğŸ“ˆ EvoluÃ§Ã£o Mensal</h3> <div class="chart-container" data-astro-cid-jywtulym> <canvas id="chartEvolucao" data-astro-cid-jywtulym></canvas> </div> </div> <div class="chart-card" data-astro-cid-jywtulym> <h3 class="chart-title" data-astro-cid-jywtulym>ğŸ¥§ DistribuiÃ§Ã£o de Receita</h3> <div class="chart-container" data-astro-cid-jywtulym> <canvas id="chartDistribuicao" data-astro-cid-jywtulym></canvas> </div> </div> </div> </div> <!-- Tab RelatÃ³rios --> <div class="tab-content" id="tabRelatorios" data-astro-cid-jywtulym> <div class="stats-grid" data-astro-cid-jywtulym> <div class="stat-card green" data-astro-cid-jywtulym> <div class="stat-icon" data-astro-cid-jywtulym>ğŸ’°</div> <div class="stat-value" id="totalFaturamento" data-astro-cid-jywtulym>R$ 0,00</div> <div class="stat-label" data-astro-cid-jywtulym>Faturamento Total</div> </div> <div class="stat-card blue" data-astro-cid-jywtulym> <div class="stat-icon" data-astro-cid-jywtulym>ğŸ“‹</div> <div class="stat-value" id="totalOrdens" data-astro-cid-jywtulym>0</div> <div class="stat-label" data-astro-cid-jywtulym>Ordens de ServiÃ§o</div> </div> <div class="stat-card purple" data-astro-cid-jywtulym> <div class="stat-icon" data-astro-cid-jywtulym>ğŸ›’</div> <div class="stat-value" id="totalVendasRelat" data-astro-cid-jywtulym>0</div> <div class="stat-label" data-astro-cid-jywtulym>Vendas Realizadas</div> </div> <div class="stat-card orange" data-astro-cid-jywtulym> <div class="stat-icon" data-astro-cid-jywtulym>ğŸ“ˆ</div> <div class="stat-value" id="ticketMedio" data-astro-cid-jywtulym>R$ 0,00</div> <div class="stat-label" data-astro-cid-jywtulym>Ticket MÃ©dio</div> </div> </div> <div class="charts-grid" data-astro-cid-jywtulym> <div class="chart-card" data-astro-cid-jywtulym> <h3 class="chart-title" data-astro-cid-jywtulym>ğŸ“ˆ Faturamento Mensal</h3> <div class="chart-container" data-astro-cid-jywtulym> <canvas id="chartFaturamento" data-astro-cid-jywtulym></canvas> </div> </div> <div class="chart-card" data-astro-cid-jywtulym> <h3 class="chart-title" data-astro-cid-jywtulym>ğŸ¥§ DistribuiÃ§Ã£o por Categoria</h3> <div class="chart-container" data-astro-cid-jywtulym> <canvas id="chartCategoria" data-astro-cid-jywtulym></canvas> </div> </div> <div class="chart-card" data-astro-cid-jywtulym> <h3 class="chart-title" data-astro-cid-jywtulym>ğŸ“Š Ordens por Status</h3> <div class="chart-container" data-astro-cid-jywtulym> <canvas id="chartStatus" data-astro-cid-jywtulym></canvas> </div> </div> <div class="chart-card" data-astro-cid-jywtulym> <h3 class="chart-title" data-astro-cid-jywtulym>ğŸ“… Vendas por Dia da Semana</h3> <div class="chart-container" data-astro-cid-jywtulym> <canvas id="chartDiaSemana" data-astro-cid-jywtulym></canvas> </div> </div> </div> </div> <!-- Tab Top ServiÃ§os --> <div class="tab-content" id="tabTopServicos" data-astro-cid-jywtulym> <div class="card" data-astro-cid-jywtulym> <h3 class="card-title" data-astro-cid-jywtulym>ğŸ† Top ServiÃ§os Mais Realizados</h3> <table data-astro-cid-jywtulym> <thead data-astro-cid-jywtulym> <tr data-astro-cid-jywtulym> <th data-astro-cid-jywtulym>#</th> <th data-astro-cid-jywtulym>Tipo de ServiÃ§o</th> <th data-astro-cid-jywtulym>Quantidade</th> <th data-astro-cid-jywtulym>Receita Total</th> <th data-astro-cid-jywtulym>TendÃªncia</th> </tr> </thead> <tbody id="topServicosBody" data-astro-cid-jywtulym></tbody> </table> </div> <div class="card" data-astro-cid-jywtulym> <h3 class="card-title" data-astro-cid-jywtulym>ğŸ›ï¸ Produtos Mais Vendidos</h3> <table data-astro-cid-jywtulym> <thead data-astro-cid-jywtulym> <tr data-astro-cid-jywtulym> <th data-astro-cid-jywtulym>#</th> <th data-astro-cid-jywtulym>Produto</th> <th data-astro-cid-jywtulym>Quantidade</th> <th data-astro-cid-jywtulym>Receita Total</th> </tr> </thead> <tbody id="topProdutosBody" data-astro-cid-jywtulym></tbody> </table> </div> </div> <a href="/dashboard" class="btn" style="margin-top: 20px;" data-astro-cid-jywtulym>â† Voltar ao Dashboard</a> </main> </div> ` }));
}, "C:/Users/46/Desktop/programa/clerk-astro/src/pages/faturamento.astro", void 0);
const $$file = "C:/Users/46/Desktop/programa/clerk-astro/src/pages/faturamento.astro";
const $$url = "/faturamento";
const _page = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: $$Faturamento,
  file: $$file,
  url: $$url
}, Symbol.toStringTag, { value: "Module" }));
const page = () => _page;
export {
  page,
  renderers
};
